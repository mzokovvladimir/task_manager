{% extends "base.html" %}
{% load static %}

{% block content %}
    <div class="container">
        <h1>Profile</h1>
        {% if user.avatar %}
            <img src="{{ user.avatar.url }}" alt="{{ user.username }}" width="100">
        {% else %}
            <img src="{% static 'images/default_avatar.png' %}" alt="Default Avatar" width="100">
        {% endif %}
        <p>Username: {{ user.username }}</p>
        <p>First name: {{ user.first_name }}</p>
        <p>Last name: {{ user.last_name }}</p>
        <p>Email: {{ user.email }}</p>
        <p>Phone: {{ user.phone }}</p>
        <a href="{% url 'edit_profile' %}">Edit Profile</a>
        <br>
        <h2>My Tasks</h2>
        <table>
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Priority</th>
                    <th>Completed</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                {% for task in tasks %}
                    <tr>
                        <td>{{ task.title }}</td>
                        <td>{{ task.get_priority_display }}</td>
                        <td>{{ task.completed }}</td>
                        <td>{{ task.due_date }}</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="4">No tasks available</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="back-link">
            <a href="{% url 'tasks' %}">Back to Task List</a>
        </div>
    </div>
{% endblock %}
